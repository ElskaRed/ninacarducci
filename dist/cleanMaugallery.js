(()=>{function t(a){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(a)}var a;(a=jQuery).fn.mauGallery=function(t){t=a.extend(a.fn.mauGallery.defaults,t);var e=[];return this.each((function(){a.fn.mauGallery.methods.createRowWrapper(a(this)),t.lightBox&&a.fn.mauGallery.methods.createLightBox(a(this),t.lightboxId,t.navigation),a.fn.mauGallery.listeners(t),a(this).children(".gallery-item").each((function(n){a.fn.mauGallery.methods.responsiveImageItem(a(this)),a.fn.mauGallery.methods.moveItemInRowWrapper(a(this)),a.fn.mauGallery.methods.wrapItemInColumn(a(this),t.columns);var i=a(this).data("gallery-tag");t.showTags&&void 0!==i&&-1===e.indexOf(i)&&e.push(i)})),t.showTags&&a.fn.mauGallery.methods.showItemTags(a(this),t.tagsPosition,e),a(this).fadeIn(500)}))},a.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0},a.fn.mauGallery.listeners=function(t){a(".gallery-item").on("click",(function(){t.lightBox&&"IMG"===a(this).prop("tagName")&&a.fn.mauGallery.methods.openLightBox(a(this),t.lightboxId)})),a(".gallery-item").on("keydown",(function(e){"Enter"===e.key&&t.lightBox&&"IMG"===a(this).prop("tagName")&&a.fn.mauGallery.methods.openLightBox(a(this),t.lightboxId)})),a(".gallery").on("click",".nav-link",a.fn.mauGallery.methods.filterByTag),a(".gallery").on("click",".mg-prev",(function(){return a.fn.mauGallery.methods.prevImage(t.lightboxId)})),a(".gallery").on("click",".mg-next",(function(){return a.fn.mauGallery.methods.nextImage(t.lightboxId)})),a(document).keydown((function(e){37===e.keyCode?a.fn.mauGallery.methods.prevImage(t.lightboxId):39===e.keyCode&&a.fn.mauGallery.methods.nextImage(t.lightboxId)}))},a.fn.mauGallery.methods={createRowWrapper:function(t){t.children().first().hasClass("row")||t.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn:function(a,e){if(e.constructor===Number)a.wrap("<div class='item-column mb-4 col-".concat(Math.ceil(12/e),"'></div>"));else if(e.constructor===Object){var n="";e.xs&&(n+=" col-".concat(Math.ceil(12/e.xs))),e.sm&&(n+=" col-sm-".concat(Math.ceil(12/e.sm))),e.md&&(n+=" col-md-".concat(Math.ceil(12/e.md))),e.lg&&(n+=" col-lg-".concat(Math.ceil(12/e.lg))),e.xl&&(n+=" col-xl-".concat(Math.ceil(12/e.xl))),a.wrap("<div class='item-column mb-4".concat(n,"'></div>"))}else console.error("Columns should be defined as numbers or objects. ".concat(t(e)," is not supported."))},moveItemInRowWrapper:function(t){t.appendTo(".gallery-items-row")},responsiveImageItem:function(t){"IMG"===t.prop("tagName")&&t.addClass("img-fluid")},openLightBox:function(t,e){a("#".concat(e)).find(".lightboxImage").attr("src",t.attr("src")),a("#".concat(e)).modal("toggle")},prevImage:function(){var t=null;a("img.gallery-item").each((function(){a(this).attr("src")===a(".lightboxImage").attr("src")&&(t=a(this))}));var e=a(".tags-bar span.active-tag").data("images-toggle"),n=[];"all"===e?a(".item-column").each((function(){a(this).children("img").length&&n.push(a(this).children("img"))})):a(".item-column").each((function(){a(this).children("img").data("gallery-tag")===e&&n.push(a(this).children("img"))}));var i,l=0;a(n).each((function(e){a(t).attr("src")===a(this).attr("src")&&(l=e-1)})),i=n[l]||n[n.length-1],a(".lightboxImage").attr("src",a(i).attr("src"))},nextImage:function(){var t=null;a("img.gallery-item").each((function(){a(this).attr("src")===a(".lightboxImage").attr("src")&&(t=a(this))}));var e=a(".tags-bar span.active-tag").data("images-toggle"),n=[];"all"===e?a(".item-column").each((function(){a(this).children("img").length&&n.push(a(this).children("img"))})):a(".item-column").each((function(){a(this).children("img").data("gallery-tag")===e&&n.push(a(this).children("img"))}));var i,l=0;a(n).each((function(e){a(t).attr("src")===a(this).attr("src")&&(l=e+1)})),i=n[l]||n[0],a(".lightboxImage").attr("src",a(i).attr("src"))},createLightBox:function(t,a,e){t.append('<div class="modal fade" id="'.concat(a||"galleryLightbox",'" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-body">\n                            ').concat(e?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />','\n                            <img class="lightboxImage img-fluid" alt="Contenu de l\'image affichÃ©e dans la modale au clique"/>\n                            ').concat(e?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;}">></div>':'<span style="display:none;" />',"\n                        </div>\n                    </div>\n                </div>\n            </div>"))},showItemTags:function(t,e,n){var i='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';a.each(n,(function(t,a){i+='<li class="nav-item active">\n                <span class="nav-link"  data-images-toggle="'.concat(a,'">').concat(a,"</span></li>")}));var l='<ul class="my-4 tags-bar nav nav-pills">'.concat(i,"</ul>");"bottom"===e?t.append(l):"top"===e?t.prepend(l):console.error("Unknown tags position: ".concat(e));var o=t.find(".nav-link").toArray(),s=o[o.length-1];o.forEach((function(t,a){t.setAttribute("tabindex","0"),t.addEventListener("keydown",(function(e){"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey?0===a&&s.blur():"Enter"===e.key&&t.click():a===o.length-1&&s.blur()}))}))},filterByTag:function(){if(!a(this).hasClass("active-tag")){a(".active.active-tag").removeClass("active active-tag"),a(this).addClass("active-tag active");var t=a(this).data("images-toggle");a(".gallery-item").each((function(){a(this).parents(".item-column").hide(),("all"===t||a(this).data("gallery-tag")===t)&&a(this).parents(".item-column").show(300)}))}}}})();